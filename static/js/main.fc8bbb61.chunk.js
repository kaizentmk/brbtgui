(this["webpackJsonpweb-app"]=this["webpackJsonpweb-app"]||[]).push([[0],[,,,,,,,,,,,,,function(e,n){},function(e,n){},function(e,n){},function(e,n){},,function(e,n,t){e.exports=t(38)},,,,,function(e,n,t){},,,,,,,,,function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";t.r(n);var a,r,i,c=t(0),o=t.n(c),s=t(6),u=t.n(s),l=(t(23),t(2)),d=t(17),m=t(1),f=t(3),b=Object(m.b)("SET_APP_STATE"),g=Object(m.b)("SET_APP_MODE"),E=Object(m.b)("SHOW_APP"),p=Object(m.b)("SHOW_LOADING"),v={display:"APP_DISPLAY_DRINKER",view:"APP_VIEW",state:"APP_STARTED_STATE",mode:"APP_LOGS_MODE"},O=Object(m.c)(v,(a={},Object(f.a)(a,E,(function(e,n){e.view="APP_VIEW"})),Object(f.a)(a,p,(function(e,n){e.view="APP_LOADING_VIEW"})),Object(f.a)(a,g,(function(e,n){e.mode=n.payload})),a)),k=Object(m.b)("SHOW_CATEGORIES"),h=Object(m.b)("CHOOSE_CATEGORY"),D={view:"CATEGORIES_VIEW",categories:[{id:"DrinksList",name:"Drinki",class:""},{id:"DrinksRandom",name:"Niespodzianka",class:""},{id:"DrinksCustom",name:"Kompozycja",class:""},{id:"DrinksAlco",name:"Alkohol",class:""},{id:"DrinksTop",name:"Top 10",class:""},{id:"DrinksDrinker",name:"Barobot",class:""}],category:{}},_=Object(m.c)(D,(r={},Object(f.a)(r,k,(function(e,n){e.view="CATEGORIES_VIEW",e.category={}})),Object(f.a)(r,h,(function(e,n){e.view="CATEGORY_VIEW",e.category=n.payload})),r)),j=t(4),A=t.n(j),C=Object(m.b)("DRINKS_SET_DATA"),N=Object(m.b)("RESET_DRINKS"),w=Object(m.b)("SHOW_DRINK"),y=Object(m.b)("CHOOSE_DRINK"),P={view:"DRINKS_LIST_VIEW",drinks:[],drink:{}},S=Object(m.c)(P,(i={},Object(f.a)(i,w,(function(e,n){e.view="DRINK_VIEW",e.drink=n.payload})),Object(f.a)(i,y,(function(e,n){!function(e){e.view="DRINKS_LIST_VIEW",e.drinks=[],e.drink={}}(e)})),Object(f.a)(i,C,(function(e,n){!function(e){Object(j.forEach)(P,(function(n,t){return e[t]=n}))}(e),e.drinks=n.payload.drinks})),Object(f.a)(i,N,(function(e,n){N(e)})),i)),I=window.JSON;var T,R,L={tojson:(T=I).stringify,fromjson:T.parse},M=Object(m.b)("USB_ADD_MSG_TO_DEVICE"),U=Object(m.b)("USB_MSG_FROM_PLUGIN"),G=Object(m.c)({dataFromUsb:[],dataToUsb:[]},(R={},Object(f.a)(R,M,(function(e,n){e.dataToUsb.push(n.payload)})),Object(f.a)(R,U,(function(e,n){e.dataFromUsb.push(L.tojson(n.payload))})),R)),V={},q={},x=function(e){return Object.values(V).forEach((function(n){return n(e)}))},W=function(e){return Object.values(q).forEach((function(n){return n(e)}))},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2?arguments[2]:void 0;return!!Object(j.isFunction)(t)&&(e[n]=t)},K=null;var H={getSucClbks:function(){return V},getErrClbks:function(){return q},connectGui:function(e){if(!e)throw new Error("Cannot create tmkusb");(K=e).connectGui(x,W)},addOnReadSucClbk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;B(V,e,n)},remOnReadSucClbk:function(e){return delete V[e]},addOnReadErrClbk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;B(q,e,n)},remOnReadErrClbk:function(e){return delete q[e]},exec:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise((function(t,a){n.length?K[e](n,t,a):K[e](t,a)}))}},F=Object(j.random)(17,17),z=Object(j.times)(F,(function(e){return{id:"drink-"+e,name:"drink "+e,desc:{0:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut feugiat pellentesque commodo. ",1:"Phasellus ornare eros lorem, quis venenatis ante sodales at. Nullam vehicula ut eros sit amet aliquet. ",2:"Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.",3:"Duis suscipit nibh sapien, lobortis dictum turpis mollis nec. In hac habitasse platea dictumst.",4:"Praesent finibus, odio ac venenatis interdum, mauris erat rutrum neque, et viverra mauris nisl nec metus. ",5:"Maecenas ut tincidunt metus, in luctus neque. Ut vehicula turpis eu massa imperdiet tempus.",6:"Aliquam metus lorem, consectetur eu gravida ac, luctus id dolor. Ut sit amet quam quis dui vehicula cursus in ut turpis.",7:"Morbi id interdum tellus. Nunc in augue nibh. ",8:"Vivamus porttitor rutrum mauris eget venenatis. Aenean sollicitudin, est et tincidunt placerat."}[""+(0===e?0:e%9)],ingredients:{0:["vodka","asdf","qwer"],1:["jin","asdf","qwer"],2:["rum","asdf","qwer"],3:["milk","asdf","qwer"],4:["wodka","asdf","qwer"],5:["jin","asdf","qwer"],6:["rum","asdf","qwer"],7:["milk","asdf","qwer"],8:["vodka","asdf","qwer"],9:["tonic","asdf","qwer"]}[""+(0===e?0:e%9)]}}));var Y=function(e){return function(n){return function(t){if(U.type!==t.type)n(t);else{if("guiConnected"===t.payload&&e.dispatch(b("APP_USB_GUI_CONNECTED_STATE")),"deviceConnected"===t.payload&&e.dispatch(b("APP_USB_DEVICE_CONNECTED_STATE")),"setData"===t.payload&&Object(l.b)((function(){e.dispatch(C(z)),e.dispatch(E())})),"getData"===t.payload){var a=e.getState(),r="none";a.usb.dataToUsb.length&&(r=a.usb.dataToUsb.join(","),H.exec("write",r).then(e.dispatch(N())))}"drinkDone"===t.payload&&e.dispatch(E())}}}},J=window.console,X=null,Q=0,Z=[];function $(e){Q++,X.innerText=Q+".\t"+e+"\r\n"+X.innerText}var ee=function(e){return{init:function(e){X=document.getElementById(e),Q=-1,$("console OK"),Z.forEach($)},log:function(n){e.log(n),Z.push(n),X&&$(n)},err:function(n){e.error(n);var t="_ERR_: "+n;Z.push(t),X&&$(t)},clear:function(){X&&(X.innerText="",Q=0,Z=[])}}}(J),ne=function(e){return function(e){return function(n){if(n.type===U.type&&n.payload)try{var t=L.fromjson(n.payload);ee.log("_:action = "+n.type+"\r\n"+t.time+" "+t.type+":\r\n"+t.data)}catch(a){ee.err(a),ee.err("::action = "+n.type+" \r\n action.payload = "+n.payload)}else ee.log("::action = "+n.type+" \r\n"+L.tojson(n.payload));e(n)}}},te=Object(m.a)({reducer:{app:O,categories:_,drinks:S,usb:G},middleware:[ne,Y].concat(Object(d.a)(Object(m.d)()))});t(32),t(33);Object(l.c)((function(e){return{view:e.app.view}}))((function(e){var n="APP_LOADING_VIEW"===e.view?"intro.gif?a="+Math.random():"";return o.a.createElement("img",{id:"app-loading",className:"center",src:n,alt:"loading"})})),t(34);var ae=Object(l.c)((function(e){return{categories:e.categories.categories}}),(function(e){return{chooseCategory:function(n){return e(h(n))}}}))((function(e){var n=e.categories,t=e.chooseCategory,a=n.map((function(e){return o.a.createElement("li",{key:e.id,className:"categories",onClick:function(){return t(e)}},o.a.createElement("div",{className:"categories"},o.a.createElement("img",{className:"center categories",src:"categories/"+e.id+".png",alt:"{c.name}"})),o.a.createElement("h2",{className:"categories"},o.a.createElement("span",{className:"center"},e.name)))}));return o.a.createElement("ul",{className:"categoriess"},a)}));t(35),t(36);var re=Object(l.c)((function(e){return{drinks:e.drinks.drinks}}),(function(e){return{showDrink:function(n){return e(w(n))}}}))((function(e){var n=e.drinks,t=e.showDrink;return n.length?o.a.createElement("div",{className:"drinks-list"},n.map((function(e){return o.a.createElement("div",{key:e.id,className:"drinks-list-entry",onClick:function(){return t(e)}},o.a.createElement("h3",{className:"drinks-list-entry-name"},o.a.createElement("span",{className:"center"},e.name)),o.a.createElement("div",{className:"drinks-list-entry-ingredients"},o.a.createElement("span",{className:"center"},e.ingredients.join(" | "))))}))):o.a.createElement("div",null,"no drinks")})),ie=t(13),ce=t.n(ie),oe=t(14),se=t.n(oe),ue=t(15),le=t.n(ue),de=t(16),me=t.n(de),fe={DrinksList:re,DrinksAlco:ce.a,DrinksCustom:se.a,DrinksRandom:le.a,DrinksTop:me.a};var be={CATEGORY_VIEW:Object(l.c)((function(e){var n=e.categories.category;return{category:n,DrinksView:fe[n.id]}}),(function(e){return{showCategories:function(){return e(k())}}}))((function(e){var n=e.category,t=e.showCategories,a=e.DrinksView;return o.a.createElement("div",{className:"category "},o.a.createElement(a,null),o.a.createElement("aside",{className:"category"},o.a.createElement("h2",{className:"category"},o.a.createElement("span",{className:"center category"},n.name)),o.a.createElement("div",{className:"cursor category",onClick:function(){return t()}},o.a.createElement("span",{className:"center"},"H"))))})),CATEGORIES_VIEW:ae};var ge=Object(l.c)((function(e){return{View:be[e.categories.view]}}))((function(e){var n=e.View;return o.a.createElement(n,null)}));var Ee=function(){return o.a.createElement("div",null,"DrinkerAux")};t(37);var pe=Object(l.c)((function(e){return{appMode:e.app.mode,drinksData:{drinks:z}}}),(function(e){return{setModeDashboard:function(n){"APP_LOGS_MODE"===n&&e(g("APP_DASHBOARD_FULL_SCREEN_MODE")),"APP_DASHBOARD_FULL_SCREEN_MODE"===n&&e(g("APP_LOGS_MODE"))},setMockDrinksData:function(n){e(C(n))},clearLogs:ee.clear,closeDashboard:function(){return e(g("APP_NORMAL_MODE"))},kioskOn:function(){return H.exec("dispatch","kioskOn").then(ee.log).catch(ee.err)},kioskOff:function(){return H.exec("dispatch","kioskOff").then(ee.log).catch(ee.err)},getUsbPluginLogs:function(){return H.exec("dispatch","getLogs").then(ee.log).catch(ee.err)},clearUsbPluginLogs:function(){return H.exec("dispatch","clearLogs").then(ee.log).catch(ee.err)},getUsbDeviceInfo:function(){return H.exec("dispatch","getUsbDeviceInfo").then(ee.log).catch(ee.err)},getUsbDeviceConfig:function(){return H.exec("dispatch","getUsbDeviceConfig").then(ee.log).catch(ee.err)}}}))((function(e){var n=e.appMode,t=e.setModeDashboard,a=e.kioskOn,r=e.kioskOff,i=e.drinksData,s=e.setMockDrinksData,u=e.clearLogs,l=e.closeDashboard,d=e.getUsbPluginLogs,m=e.clearUsbPluginLogs,f=e.getUsbDeviceInfo;return e.getUsbDeviceConfig,Object(c.useEffect)((function(){ee.init("dashboard-console"),ee.log("Dashboard.jsx:: dashboard-console: connected")}),[]),o.a.createElement("div",{className:"dashboard"},o.a.createElement("div",null,o.a.createElement("button",{className:"dashboard-button",onClick:function(){return l()}},"-X-"),o.a.createElement("button",{className:"dashboard-button",onClick:function(){return a()}},"kiosk on"),o.a.createElement("button",{className:"dashboard-button",onClick:function(){return r()}},"kiosk off"),o.a.createElement("button",{className:"dashboard-button",onClick:function(){return t(n)}},"toggle fullscreen"),o.a.createElement("button",{className:"dashboard-button",onClick:function(){return s(i)}},"load mock data"),o.a.createElement("button",{className:"dashboard-button",onClick:function(){return u()}},"clear"),o.a.createElement("button",{className:"dashboard-button",onClick:function(){return m()}},"clear usb logs"),o.a.createElement("button",{className:"dashboard-button",onClick:function(){return d()}},"get usb logs"),o.a.createElement("button",{className:"dashboard-button",onClick:function(){return f()}},"device info")),o.a.createElement("div",{id:"dashboard-console",className:"dashboard-console"}))})),ve=0,Oe="none",ke={connectGui:function(e,n){!function n(){setTimeout((function(){0===ve&&e("guiConnected"),1===ve&&e("deviceConnected"),2===ve&&e("setData"),ve%3===0&&e("getData"),ve%9===0&&"none"!==Oe&&(e("drinkDone"),Oe="none"),ve++,n()}),A.a.random(1e6,1e6))}()},init:function(e,n){setTimeout((function(){e("initialized")}),A.a.random(1e3,3e3))},write:function(e,n,t){console.log("msg from the gui: "+e),Oe=e,n()},resetConfig:function(e,n){setTimeout((function(){e("resetConfig")}),A.a.random(1e3,3e3))},getConfig:function(e,n){setTimeout((function(){e("getConfig")}),A.a.random(1e3,3e3))},getLogs:function(e,n){setTimeout((function(){e(["getLogs"])}),A.a.random(1e3,3e3))},reset:function(e,n){setTimeout((function(){e("reset")}),A.a.random(1e3,3e3))}};var he=Object(l.c)((function(e){var n="APP_DISPLAY_DRINKER"===e.app.display?ge:Ee;return{appMode:e.app.mode,AppView:n}}),(function(e){return{usbMsgFromDevice:function(n){return e(U(n))}}}))((function(e){var n=e.cordova,t=e.AppView,a=e.appMode,r=e.usbMsgFromDevice;return Object(c.useEffect)((function(){H.addOnReadSucClbk("action",r),H.addOnReadErrClbk("action",r),n?H.connectGui(n.plugins.tmkusb):H.connectGui(ke)}),[]),"APP_NORMAL_MODE"===a?o.a.createElement(t,null):"APP_LOGS_MODE"===a?o.a.createElement("div",{id:"app"},o.a.createElement("div",{id:"app-view-wrapper"},o.a.createElement(t,null)),o.a.createElement("div",{id:"app-dashboard-wrapper"},o.a.createElement(pe,null))):"APP_DASHBOARD_FULL_SCREEN_MODE"===a?o.a.createElement(pe,null):o.a.createElement("div",null,"no proper mode")}));({initialize:function(){var e=!!window.cordova;ee.log("index.js:: cordovaIsPresent = "+e),e?document.addEventListener("deviceready",this.onDeviceReady.bind(this),!1):u.a.render(o.a.createElement(l.a,{store:te},o.a.createElement(he,null)),document.getElementById("root"))},onDeviceReady:function(){ee.log("index.js::deviceready"),u.a.render(o.a.createElement(l.a,{store:te},o.a.createElement(he,{cordova:window.cordova})),document.getElementById("root"),(function(){}))}}).initialize()}],[[18,1,2]]]);
//# sourceMappingURL=main.fc8bbb61.chunk.js.map