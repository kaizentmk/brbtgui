(this["webpackJsonpweb-app"]=this["webpackJsonpweb-app"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,n,t){e.exports=t(47)},,,,,function(e,n,t){},,,,,,,,,function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";t.r(n);var r,a,i,c=t(0),o=t.n(c),s=t(6),u=t.n(s),d=(t(19),t(1)),l=t(13),m=t(2),f=t(3),k=Object(m.b)("SET_APP_STATE"),b=Object(m.b)("SET_APP_MODE"),g=Object(m.b)("SHOW_APP"),E=Object(m.b)("SHOW_LOADING"),v={display:"APP_DISPLAY_DRINKER",view:"APP_VIEW",state:"APP_STARTED_STATE",mode:"APP_NORMAL_MODE"},p=Object(m.c)(v,(r={},Object(f.a)(r,g,(function(e,n){e.view="APP_VIEW"})),Object(f.a)(r,E,(function(e,n){e.view="APP_LOADING_VIEW"})),Object(f.a)(r,b,(function(e,n){e.mode=n.payload})),r)),h=Object(m.b)("SHOW_CATEGORIES"),O=Object(m.b)("CHOOSE_CATEGORY"),D={view:"CATEGORIES_VIEW",categories:[{id:"DrinksList",name:"lista drink\xf3w",sname:"cat-list",aside:"narrow"},{id:"DrinksPrefs",name:"twoje preferencje",sname:"cat-prefs",aside:"wide"},{id:"DrinksTop",name:"TOP 10",sname:"cat-top",aside:"narrow"},{id:"DrinksRandom",name:"niespodzianka",sname:"cat-random",aside:"narrow"},{id:"DrinksCustom",name:"twoja kompozycja",sname:"cat-custom",aside:"wide"},{id:"DrinksAlco",name:"alkohol",sname:"cat-alco",aside:"narrow"}],category:{}},w=Object(m.c)(D,(a={},Object(f.a)(a,h,(function(e,n){e.view="CATEGORIES_VIEW",e.category={}})),Object(f.a)(a,O,(function(e,n){e.view="CATEGORY_VIEW",e.category=n.payload})),a)),_=t(4),j=t.n(_),y=Object(m.b)("DRINKS_SET_DATA"),N=Object(m.b)("RESET_DRINKS"),A=Object(m.b)("SHOW_DRINK"),C={drinks:[],drink:{}},P=Object(m.c)(C,(i={},Object(f.a)(i,A,(function(e,n){e.drink=n.payload})),Object(f.a)(i,y,(function(e,n){!function(e){Object(_.forEach)(C,(function(n,t){return e[t]=n}))}(e),e.drinks=n.payload.drinks})),Object(f.a)(i,N,(function(e,n){e.drink={}})),i)),S=window.JSON;var R,T,I={tojson:(R=S).stringify,fromjson:R.parse},q=Object(m.b)("USB_ADD_MSG_TO_DEVICE"),L=Object(m.b)("USB_MSG_FROM_PLUGIN"),M=Object(m.c)({dataFromUsb:[],dataToUsb:[]},(T={},Object(f.a)(T,q,(function(e,n){e.dataToUsb.push(n.payload)})),Object(f.a)(T,L,(function(e,n){e.dataFromUsb.push(I.tojson(n.payload))})),T)),U={},x={},G=function(e){return Object.values(U).forEach((function(n){return n(e)}))},V=function(e){return Object.values(x).forEach((function(n){return n(e)}))},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2?arguments[2]:void 0;return!!Object(_.isFunction)(t)&&(e[n]=t)},B=null;var F={getSucClbks:function(){return U},getErrClbks:function(){return x},connectGui:function(e){if(!e)throw new Error("Cannot create tmkusb");(B=e).connectGui(G,V)},addOnReadSucClbk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;W(U,e,n)},remOnReadSucClbk:function(e){return delete U[e]},addOnReadErrClbk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;W(x,e,n)},remOnReadErrClbk:function(e){return delete x[e]},exec:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise((function(t,r){n.length?B[e](n,t,r):B[e](t,r)}))}},H=Object(_.random)(17,17),K=Object(_.times)(H,(function(e){return{id:"drink-"+e,name:"drink "+e,desc:{0:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut feugiat pellentesque commodo. ",1:"Phasellus ornare eros lorem, quis venenatis ante sodales at. Nullam vehicula ut eros sit amet aliquet. ",2:"Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.",3:"Duis suscipit nibh sapien, lobortis dictum turpis mollis nec. In hac habitasse platea dictumst.",4:"Praesent finibus, odio ac venenatis interdum, mauris erat rutrum neque, et viverra mauris nisl nec metus. ",5:"Maecenas ut tincidunt metus, in luctus neque. Ut vehicula turpis eu massa imperdiet tempus.",6:"Aliquam metus lorem, consectetur eu gravida ac, luctus id dolor. Ut sit amet quam quis dui vehicula cursus in ut turpis.",7:"Morbi id interdum tellus. Nunc in augue nibh. ",8:"Vivamus porttitor rutrum mauris eget venenatis. Aenean sollicitudin, est et tincidunt placerat."}[""+(0===e?0:e%9)],ingredients:{0:["vodka","asdf","qwer"],1:["jin","asdfqwerqwe","qwer","qwerqwr qwerq","qwerqewrq qfasdfaf","qwer","xxbxvbxv"],2:["rum","asdf","qwer","qwerqwerqwerqew"],3:["milk","asdf","qwer"],4:["wodka","asdf","qwer"],5:["jin","asdf","qwer"],6:["rum","asdf","qwer"],7:["milk","asdf","qwer"],8:["vodka","asdf","qwer"],9:["tonic","asdf","qwer"]}[""+(0===e?0:e%9)],icon:"icon.png"}}));var z=function(e){return function(n){return function(t){if(L.type!==t.type)n(t);else{if("guiConnected"===t.payload&&e.dispatch(k("APP_USB_GUI_CONNECTED_STATE")),"deviceConnected"===t.payload&&e.dispatch(k("APP_USB_DEVICE_CONNECTED_STATE")),"setData"===t.payload&&Object(d.b)((function(){e.dispatch(y(K)),e.dispatch(g())})),"getData"===t.payload){var r=e.getState(),a="none";r.usb.dataToUsb.length&&(a=r.usb.dataToUsb.join(","),F.exec("write",a).then(e.dispatch(N())))}"drinkDone"===t.payload&&e.dispatch(g())}}}},Y=window.console,J=null,X=0,Z=[];function Q(e){X++,J.innerText=X+".\t"+e+"\r\n"+J.innerText}var $=function(e){return{init:function(e){J=document.getElementById(e),X=-1,Q("console OK"),Z.forEach(Q)},log:function(n){e.log(n),Z.push(n),J&&Q(n)},err:function(n){e.error(n);var t="_ERR_: "+n;Z.push(t),J&&Q(t)},clear:function(){J&&(J.innerText="",X=0,Z=[])}}}(Y),ee=function(e){return function(e){return function(n){if(n.type===L.type&&n.payload)try{var t=I.fromjson(n.payload);$.log("_:action = "+n.type+"\r\n"+t.time+" "+t.type+":\r\n"+t.data)}catch(r){$.err(r),$.err("::action = "+n.type+" \r\n action.payload = "+n.payload)}else $.log("::action = "+n.type+" \r\n"+I.tojson(n.payload));e(n)}}},ne=Object(m.a)({reducer:{app:p,categories:w,drinks:P,usb:M},middleware:[ee,z].concat(Object(l.a)(Object(m.d)()))});t(28),t(29),t(30),t(31);Object(d.c)((function(e){return{view:e.app.view}}))((function(e){var n="APP_LOADING_VIEW"===e.view?"intro.gif?a="+Math.random():"";return o.a.createElement("img",{id:"app-loading",className:"center",src:n,alt:"loading"})})),t(32),t(33);var te=function(e){var n=e.category;return o.a.createElement("div",{className:"category-icon "+n.sname},o.a.createElement("svg",{className:"category-icon "+n.sname,viewBox:"0 0 100 100",preserveAspectRatio:"true"},o.a.createElement("circle",{className:"category-icon "+n.sname,cx:"50",cy:"50",r:"50"}),o.a.createElement("image",{href:"categories/"+n.sname+".svg",className:"category-icon "+n.sname})))};t(34);var re=function(e){var n=e.category;return o.a.createElement("h2",{className:"category-name "+n.sname},o.a.createElement("span",{className:"center category-name "+n.sname},n.name))};var ae=Object(d.c)((function(e){return{categories:e.categories.categories}}),(function(e){return{chooseCategory:function(n){return e(O(n))}}}))((function(e){var n=e.categories,t=e.chooseCategory,r=n.map((function(e){return o.a.createElement("li",{key:e.id,className:"categories",onClick:function(){return t(e)}},o.a.createElement(te,{category:e}),o.a.createElement(re,{category:e}))}));return o.a.createElement("ul",{className:"categoriess"},r)}));t(35),t(36),t(37),t(38);var ie=function(e){var n=e.action;return o.a.createElement("button",{className:"cats-home-btn",onClick:function(){return n()}},o.a.createElement("img",{className:"cats-home-btn ",src:"home.svg",alt:"home.svg"}))};var ce=function(e){var n=e.cssClassSuffix,t=e.children,r=e.showCategories,a="cat-aside-"+n;return o.a.createElement("aside",{className:a},o.a.createElement("div",{className:a},t),o.a.createElement("nav",{className:a},o.a.createElement(ie,{action:r})))};t(39);var oe=function(e){var n=e.category;return o.a.createElement(o.a.Fragment,null,o.a.createElement(te,{category:n}),o.a.createElement(re,{category:n}))};var se=Object(d.c)((function(e){return{drink:e.drinks.drink,drinks:e.drinks.drinks}}),(function(e){return{showDrink:function(n){return e(A(n))}}}))((function(e){return e.drink,e.drinks,e.showDrink,"drinks alco"}));var ue=Object(d.c)((function(e){return{drink:e.drinks.drink,drinks:e.drinks.drinks}}),(function(e){return{showDrink:function(n){return e(A(n))}}}))((function(e){return e.drink,e.drinks,e.showDrink,"drinks custom"}));t(40);var de=function(e){var n=e.drink;return o.a.createElement("h2",{className:"drink-name"},o.a.createElement("span",{className:"drink-name center-top-grh"},n.name))};t(41),t(42);var le=function(e){var n=e.drink;return o.a.createElement("ul",{className:"drink-ings"},n.ingredients.map((function(e,t,r){return o.a.createElement("li",{key:n.id+"-ings"+t,className:"drink-ings"},o.a.createElement("span",{className:"drink-ings"},e))})))};var me=function(e){var n=e.drink;return o.a.createElement("div",{className:"drinks-list-item"},o.a.createElement(de,{drink:n}),o.a.createElement(le,{drink:n}))};t(43),t(44);var fe=function(e){var n=e.drink;return o.a.createElement("div",{className:"drink-icon "},o.a.createElement("img",{className:"drink-icon center",src:n.icon,alt:n.name}))};var ke=Object(d.c)((function(e){return{drink:e.drinks.drink}}),(function(e){return{chooseDrink:function(n){Object(d.b)((function(){e(N()),e(q(n.id)),e(E())}))}}}))((function(e){var n=e.drink,t=e.chooseDrink;return o.a.createElement("div",{className:"drink"},o.a.createElement(de,{drink:n}),o.a.createElement(fe,{drink:n}),o.a.createElement(le,{drink:n}),o.a.createElement("nav",{className:"drink"},o.a.createElement("button",{className:"drink",onClick:function(){return t(n)}},"ZR\xd3B DRINKA")))}));t(45);var be={DrinksAlco:se,DrinksCustom:ue,DrinksList:Object(d.c)((function(e){return{drink:e.drinks.drink,drinks:e.drinks.drinks}}),(function(e){return{showDrink:function(n){return e(A(n))}}}))((function(e){var n=e.drink,t=e.drinks,r=e.showDrink;return t.length?o.a.createElement("ul",{className:"drinks-list"},t.map((function(e){var t=e.id===n.id,a="drinks-list "+(t?"drinks-list-selected":""),i=t?{id:-1}:e;return o.a.createElement("li",{key:e.id,className:a,onClick:function(){return r(i)}},t?o.a.createElement(ke,{key:e.id+"d"}):o.a.createElement(me,{key:e.id+"dli",drink:e}))}))):o.a.createElement("ul",{className:"drinks-list"},o.a.createElement("li",null,"no drinks"))})),DrinksPrefs:Object(d.c)((function(e){return{drink:e.drinks.drink,drinks:e.drinks.drinks}}),(function(e){return{showDrink:function(n){return e(A(n))}}}))((function(e){return e.drink,e.drinks,e.showDrink,"drinks prefs"})),DrinksRandom:Object(d.c)((function(e){return{drink:e.drinks.drink,drinks:e.drinks.drinks}}),(function(e){return{showDrink:function(n){return e(A(n))}}}))((function(e){return e.drink,e.drinks,e.showDrink,"drinks random"})),DrinksTop:Object(d.c)((function(e){return{drink:e.drinks.drink,drinks:e.drinks.drinks}}),(function(e){return{showDrink:function(n){return e(A(n))}}}))((function(e){return e.drink,e.drinks,e.showDrink,"drinks top"}))},ge={};var Ee={CATEGORY_VIEW:Object(d.c)((function(e){var n=e.categories.category;return{category:n,DrinksView:be[n.id],AsideContent_:ge[n.id+"Aside"]||oe}}),(function(e){return{showCategories:function(){Object(d.b)((function(){e(N()),e(h())}))}}}))((function(e){var n=e.category,t=e.showCategories,r=e.DrinksView,a=e.AsideContent_;return o.a.createElement("div",{className:"category "},o.a.createElement(r,null),o.a.createElement(ce,{category:n,cssClassSuffix:n.aside,showCategories:t},o.a.createElement(a,{category:n})))})),CATEGORIES_VIEW:ae};var ve=Object(d.c)((function(e){return{View:Ee[e.categories.view]}}))((function(e){var n=e.View;return o.a.createElement(n,null)}));var pe=function(){return o.a.createElement("div",null,"DrinkerAux")};t(46);var he=Object(d.c)((function(e){return{appMode:e.app.mode,drinksData:{drinks:K}}}),(function(e){return{setModeDashboard:function(n){"APP_LOGS_MODE"===n&&e(b("APP_DASHBOARD_FULL_SCREEN_MODE")),"APP_DASHBOARD_FULL_SCREEN_MODE"===n&&e(b("APP_LOGS_MODE"))},setMockDrinksData:function(n){e(y(n))},clearLogs:$.clear,closeDashboard:function(){return e(b("APP_NORMAL_MODE"))},kioskOn:function(){return F.exec("dispatch","kioskOn").then($.log).catch($.err)},kioskOff:function(){return F.exec("dispatch","kioskOff").then($.log).catch($.err)},getUsbPluginLogs:function(){return F.exec("dispatch","getLogs").then($.log).catch($.err)},clearUsbPluginLogs:function(){return F.exec("dispatch","clearLogs").then($.log).catch($.err)},getUsbDeviceInfo:function(){return F.exec("dispatch","getUsbDeviceInfo").then($.log).catch($.err)},getUsbDeviceConfig:function(){return F.exec("dispatch","getUsbDeviceConfig").then($.log).catch($.err)}}}))((function(e){var n=e.appMode,t=e.setModeDashboard,r=e.kioskOn,a=e.kioskOff,i=e.drinksData,s=e.setMockDrinksData,u=e.clearLogs,d=e.closeDashboard,l=e.getUsbPluginLogs,m=e.clearUsbPluginLogs,f=e.getUsbDeviceInfo;return e.getUsbDeviceConfig,Object(c.useEffect)((function(){$.init("dashboard-console"),$.log("Dashboard.jsx:: dashboard-console: connected")}),[]),o.a.createElement("div",{className:"dashboard"},o.a.createElement("div",null,o.a.createElement("button",{className:"dashboard-button",onClick:function(){return d()}},"-X-"),o.a.createElement("button",{className:"dashboard-button",onClick:function(){return r()}},"kiosk on"),o.a.createElement("button",{className:"dashboard-button",onClick:function(){return a()}},"kiosk off"),o.a.createElement("button",{className:"dashboard-button",onClick:function(){return t(n)}},"toggle fullscreen"),o.a.createElement("button",{className:"dashboard-button",onClick:function(){return s(i)}},"load mock data"),o.a.createElement("button",{className:"dashboard-button",onClick:function(){return u()}},"clear"),o.a.createElement("button",{className:"dashboard-button",onClick:function(){return m()}},"clear usb logs"),o.a.createElement("button",{className:"dashboard-button",onClick:function(){return l()}},"get usb logs"),o.a.createElement("button",{className:"dashboard-button",onClick:function(){return f()}},"device info")),o.a.createElement("div",{id:"dashboard-console",className:"dashboard-console"}))})),Oe=0,De="none",we={connectGui:function(e,n){!function n(){setTimeout((function(){0===Oe&&e("guiConnected"),1===Oe&&e("deviceConnected"),2===Oe&&e("setData"),Oe%3===0&&e("getData"),Oe%9===0&&"none"!==De&&(e("drinkDone"),De="none"),Oe++,n()}),j.a.random(1e6,1e6))}()},init:function(e,n){setTimeout((function(){e("initialized")}),j.a.random(1e3,3e3))},write:function(e,n,t){console.log("msg from the gui: "+e),De=e,n()},resetConfig:function(e,n){setTimeout((function(){e("resetConfig")}),j.a.random(1e3,3e3))},getConfig:function(e,n){setTimeout((function(){e("getConfig")}),j.a.random(1e3,3e3))},getLogs:function(e,n){setTimeout((function(){e(["getLogs"])}),j.a.random(1e3,3e3))},reset:function(e,n){setTimeout((function(){e("reset")}),j.a.random(1e3,3e3))}};var _e=Object(d.c)((function(e){var n="APP_DISPLAY_DRINKER"===e.app.display?ve:pe;return{appMode:e.app.mode,AppView:n}}),(function(e){return{usbMsgFromDevice:function(n){return e(L(n))},loadMockDrinks:function(){return e(y({drinks:K}))}}}))((function(e){var n=e.cordova,t=e.AppView,r=e.appMode,a=e.usbMsgFromDevice,i=e.loadMockDrinks;return Object(c.useEffect)((function(){F.addOnReadSucClbk("action",a),F.addOnReadErrClbk("action",a),n?F.connectGui(n.plugins.tmkusb):(F.connectGui(we),i())}),[]),"APP_NORMAL_MODE"===r?o.a.createElement(t,null):"APP_LOGS_MODE"===r?o.a.createElement("div",{id:"app"},o.a.createElement("div",{id:"app-view-wrapper"},o.a.createElement(t,null)),o.a.createElement("div",{id:"app-dashboard-wrapper"},o.a.createElement(he,null))):"APP_DASHBOARD_FULL_SCREEN_MODE"===r?o.a.createElement(he,null):o.a.createElement("div",null,"no proper mode")}));({initialize:function(){var e=!!window.cordova;$.log("index.js:: cordovaIsPresent = "+e),e?document.addEventListener("deviceready",this.onDeviceReady.bind(this),!1):u.a.render(o.a.createElement(d.a,{store:ne},o.a.createElement(_e,null)),document.getElementById("root"))},onDeviceReady:function(){$.log("index.js::deviceready"),u.a.render(o.a.createElement(d.a,{store:ne},o.a.createElement(_e,{cordova:window.cordova})),document.getElementById("root"),(function(){}))}}).initialize()}],[[14,1,2]]]);
//# sourceMappingURL=main.ed057eea.chunk.js.map